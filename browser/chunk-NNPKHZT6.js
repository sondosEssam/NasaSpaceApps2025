import{c as Ge}from"./chunk-F63ZZR6Y.js";import{a as je}from"./chunk-6J3KBWRV.js";import{$a as f,Ab as H,Da as W,Db as le,Ea as ie,Fa as _,Fb as ke,Ga as v,Gb as ue,Ja as E,La as Ae,N as S,Na as Ee,O as ee,Ob as Re,P as te,Pa as we,R as M,Ra as ne,S as Ve,Sa as re,T as A,Ta as Fe,Ua as Se,Va as xe,Wa as U,Xa as d,Ya as c,Za as oe,_a as h,a as p,b as g,ca as Me,eb as C,ga as j,j as ve,ja as G,jb as Ie,ka as B,kb as Oe,lb as s,m as Ce,ma as x,mb as se,nb as y,ob as ae,pb as Ne,qb as Pe,r as De,rb as Te,ua as l,ub as O,w as be,ya as I,za as u,zb as D}from"./chunk-HSYZIOVM.js";var L=class i{constructor(e){this.http=e}baseUrl="http://localhost:3000";getPollutionData(){return this.http.get(`${this.baseUrl}/pollution`)}getWeatherData(){return this.http.get(`${this.baseUrl}/weather`)}static \u0275fac=function(t){return new(t||i)(Ve(je))};static \u0275prov=ee({token:i,factory:i.\u0275fac,providedIn:"root"})};var Ke=(()=>{class i{_renderer;_elementRef;onChange=t=>{};onTouched=()=>{};constructor(t,n){this._renderer=t,this._elementRef=n}setProperty(t,n){this._renderer.setProperty(this._elementRef.nativeElement,t,n)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}static \u0275fac=function(n){return new(n||i)(u(I),u(x))};static \u0275dir=_({type:i})}return i})(),ge=(()=>{class i extends Ke{static \u0275fac=(()=>{let t;return function(r){return(t||(t=B(i)))(r||i)}})();static \u0275dir=_({type:i,features:[v]})}return i})(),X=new M("");var ht={provide:X,useExisting:S(()=>Xe),multi:!0};function ft(){let i=ue()?ue().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var pt=new M(""),Xe=(()=>{class i extends Ke{_compositionMode;_composing=!1;constructor(t,n,r){super(t,n),this._compositionMode=r,this._compositionMode==null&&(this._compositionMode=!ft())}writeValue(t){let n=t??"";this.setProperty("value",n)}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}static \u0275fac=function(n){return new(n||i)(u(I),u(x),u(pt,8))};static \u0275dir=_({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){n&1&&C("input",function(a){return r._handleInput(a.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(a){return r._compositionEnd(a.target.value)})},standalone:!1,features:[O([ht]),v]})}return i})();var mt=new M(""),gt=new M("");function Ze(i){return i!=null}function Qe(i){return Ee(i)?Ce(i):i}function Ye(i){let e={};return i.forEach(t=>{e=t!=null?p(p({},e),t):e}),Object.keys(e).length===0?null:e}function Je(i,e){return e.map(t=>t(i))}function _t(i){return!i.validate}function et(i){return i.map(e=>_t(e)?e:t=>e.validate(t))}function yt(i){if(!i)return null;let e=i.filter(Ze);return e.length==0?null:function(t){return Ye(Je(t,e))}}function tt(i){return i!=null?yt(et(i)):null}function vt(i){if(!i)return null;let e=i.filter(Ze);return e.length==0?null:function(t){let n=Je(t,e).map(Qe);return be(n).pipe(De(Ye))}}function it(i){return i!=null?vt(et(i)):null}function Be(i,e){return i===null?[e]:Array.isArray(i)?[...i,e]:[i,e]}function Ct(i){return i._rawValidators}function Dt(i){return i._rawAsyncValidators}function ce(i){return i?Array.isArray(i)?i:[i]:[]}function q(i,e){return Array.isArray(i)?i.includes(e):i===e}function We(i,e){let t=ce(e);return ce(i).forEach(r=>{q(t,r)||t.push(r)}),t}function Ue(i,e){return ce(e).filter(t=>!q(i,t))}var z=class{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=tt(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=it(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return this.control?this.control.hasError(e,t):!1}getError(e,t){return this.control?this.control.getError(e,t):null}},he=class extends z{name;get formDirective(){return null}get path(){return null}},R=class extends z{_parent=null;name=null;valueAccessor=null},fe=class{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}},bt={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},Ci=g(p({},bt),{"[class.ng-submitted]":"isSubmitted"}),nt=(()=>{class i extends fe{constructor(t){super(t)}static \u0275fac=function(n){return new(n||i)(u(R,2))};static \u0275dir=_({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){n&2&&Ie("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},standalone:!1,features:[v]})}return i})();var N="VALID",$="INVALID",w="PENDING",P="DISABLED",b=class{},K=class extends b{value;source;constructor(e,t){super(),this.value=e,this.source=t}},T=class extends b{pristine;source;constructor(e,t){super(),this.pristine=e,this.source=t}},k=class extends b{touched;source;constructor(e,t){super(),this.touched=e,this.source=t}},F=class extends b{status;source;constructor(e,t){super(),this.status=e,this.source=t}};var pe=class extends b{source;constructor(e){super(),this.source=e}};function Vt(i){return(Z(i)?i.validators:i)||null}function Mt(i){return Array.isArray(i)?tt(i):i||null}function At(i,e){return(Z(e)?e.asyncValidators:i)||null}function Et(i){return Array.isArray(i)?it(i):i||null}function Z(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}var me=class{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,t){this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return D(this.statusReactive)}set status(e){D(()=>this.statusReactive.set(e))}_status=H(()=>this.statusReactive());statusReactive=j(void 0);get valid(){return this.status===N}get invalid(){return this.status===$}get pending(){return this.status==w}get disabled(){return this.status===P}get enabled(){return this.status!==P}errors;get pristine(){return D(this.pristineReactive)}set pristine(e){D(()=>this.pristineReactive.set(e))}_pristine=H(()=>this.pristineReactive());pristineReactive=j(!0);get dirty(){return!this.pristine}get touched(){return D(this.touchedReactive)}set touched(e){D(()=>this.touchedReactive.set(e))}_touched=H(()=>this.touchedReactive());touchedReactive=j(!1);get untouched(){return!this.touched}_events=new ve;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(We(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(We(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Ue(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Ue(e,this._rawAsyncValidators))}hasValidator(e){return q(this._rawValidators,e)}hasAsyncValidator(e){return q(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){let t=this.touched===!1;this.touched=!0;let n=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched(g(p({},e),{sourceControl:n})),t&&e.emitEvent!==!1&&this._events.next(new k(!0,n))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(t=>t.markAllAsTouched(e))}markAsUntouched(e={}){let t=this.touched===!0;this.touched=!1,this._pendingTouched=!1;let n=e.sourceControl??this;this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:n})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n),t&&e.emitEvent!==!1&&this._events.next(new k(!1,n))}markAsDirty(e={}){let t=this.pristine===!0;this.pristine=!1;let n=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty(g(p({},e),{sourceControl:n})),t&&e.emitEvent!==!1&&this._events.next(new T(!1,n))}markAsPristine(e={}){let t=this.pristine===!1;this.pristine=!0,this._pendingDirty=!1;let n=e.sourceControl??this;this._forEachChild(r=>{r.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),t&&e.emitEvent!==!1&&this._events.next(new T(!0,n))}markAsPending(e={}){this.status=w;let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new F(this.status,t)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending(g(p({},e),{sourceControl:t}))}disable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=P,this.errors=null,this._forEachChild(r=>{r.disable(g(p({},e),{onlySelf:!0}))}),this._updateValue();let n=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new K(this.value,n)),this._events.next(new F(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(g(p({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){let t=this._parentMarkedDirty(e.onlySelf);this.status=N,this._forEachChild(n=>{n.enable(g(p({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(g(p({},e),{skipPristineCheck:t}),this),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(e,t){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},t),this._parent._updateTouched({},t))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){let n=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===N||this.status===w)&&this._runAsyncValidator(n,e.emitEvent)}let t=e.sourceControl??this;e.emitEvent!==!1&&(this._events.next(new K(this.value,t)),this._events.next(new F(this.status,t)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(g(p({},e),{sourceControl:t}))}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?P:N}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,t){if(this.asyncValidator){this.status=w,this._hasOwnPendingAsyncValidator={emitEvent:t!==!1,shouldHaveEmitted:e!==!1};let n=Qe(this.asyncValidator(this));this._asyncValidationSubscription=n.subscribe(r=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(r,{emitEvent:t,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();let e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(t.emitEvent!==!1,this,t.shouldHaveEmitted)}get(e){let t=e;return t==null||(Array.isArray(t)||(t=t.split(".")),t.length===0)?null:t.reduce((n,r)=>n&&n._find(r),this)}getError(e,t){let n=t?this.get(t):this;return n&&n.errors?n.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,t,n){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||n)&&this._events.next(new F(this.status,t)),this._parent&&this._parent._updateControlsErrors(e,t,n)}_initObservables(){this.valueChanges=new E,this.statusChanges=new E}_calculateStatus(){return this._allControlsDisabled()?P:this.errors?$:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(w)?w:this._anyControlsHaveStatus($)?$:N}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,t){let n=!this._anyControlsDirty(),r=this.pristine!==n;this.pristine=n,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,t),r&&this._events.next(new T(this.pristine,t))}_updateTouched(e={},t){this.touched=this._anyControlsTouched(),this._events.next(new k(this.touched,t)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,t)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Z(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let t=this._parent&&this._parent.dirty;return!e&&!!t&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=Mt(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=Et(this._rawAsyncValidators)}};var rt=new M("",{providedIn:"root",factory:()=>_e}),_e="always";function wt(i,e){return[...e.path,i]}function Ft(i,e,t=_e){xt(i,e),e.valueAccessor.writeValue(i.value),(i.disabled||t==="always")&&e.valueAccessor.setDisabledState?.(i.disabled),It(i,e),Nt(i,e),Ot(i,e),St(i,e)}function He(i,e){i.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function St(i,e){if(e.valueAccessor.setDisabledState){let t=n=>{e.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(t),e._registerOnDestroy(()=>{i._unregisterOnDisabledChange(t)})}}function xt(i,e){let t=Ct(i);e.validator!==null?i.setValidators(Be(t,e.validator)):typeof t=="function"&&i.setValidators([t]);let n=Dt(i);e.asyncValidator!==null?i.setAsyncValidators(Be(n,e.asyncValidator)):typeof n=="function"&&i.setAsyncValidators([n]);let r=()=>i.updateValueAndValidity();He(e._rawValidators,r),He(e._rawAsyncValidators,r)}function It(i,e){e.valueAccessor.registerOnChange(t=>{i._pendingValue=t,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&ot(i,e)})}function Ot(i,e){e.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&ot(i,e),i.updateOn!=="submit"&&i.markAsTouched()})}function ot(i,e){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function Nt(i,e){let t=(n,r)=>{e.valueAccessor.writeValue(n),r&&e.viewToModelUpdate(n)};i.registerOnChange(t),e._registerOnDestroy(()=>{i._unregisterOnChange(t)})}function Pt(i,e){if(!i.hasOwnProperty("model"))return!1;let t=i.model;return t.isFirstChange()?!0:!Object.is(e,t.currentValue)}function Tt(i){return Object.getPrototypeOf(i.constructor)===ge}function kt(i,e){if(!e)return null;Array.isArray(e);let t,n,r;return e.forEach(o=>{o.constructor===Xe?t=o:Tt(o)?n=o:r=o}),r||n||t||null}function Le(i,e){let t=i.indexOf(e);t>-1&&i.splice(t,1)}function $e(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var Rt=class extends me{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,t,n){super(Vt(t),At(n,t)),this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Z(t)&&(t.nonNullable||t.initialValueIsDefault)&&($e(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&t.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,t.emitViewToModelChange!==!1)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1,t?.emitEvent!==!1&&this._events.next(new pe(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){Le(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){Le(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){$e(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var jt={provide:R,useExisting:S(()=>ye)},qe=Promise.resolve(),ye=(()=>{class i extends R{_changeDetectorRef;callSetDisabledState;control=new Rt;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new E;constructor(t,n,r,o,a,m){super(),this._changeDetectorRef=a,this.callSetDisabledState=m,this._parent=t,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=kt(this,o)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){let n=t.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),Pt(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){Ft(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(t){qe.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){let n=t.isDisabled.currentValue,r=n!==0&&ke(n);qe.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?wt(t,this._parent):[t]}static \u0275fac=function(n){return new(n||i)(u(he,9),u(mt,10),u(gt,10),u(X,10),u(le,8),u(rt,8))};static \u0275dir=_({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[O([jt]),v,G]})}return i})();var Gt={provide:X,useExisting:S(()=>Q),multi:!0};function st(i,e){return i==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${i}: ${e}`.slice(0,50))}function Bt(i){return i.split(":")[0]}var Q=(()=>{class i extends ge{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;appRefInjector=A(we).injector;destroyRef=A(Me);cdr=A(le);_queuedWrite=!1;_writeValueAfterRender(){this._queuedWrite||this.appRefInjector.destroyed||(this._queuedWrite=!0,Ae({write:()=>{this.destroyRef.destroyed||(this._queuedWrite=!1,this.writeValue(this.value))}},{injector:this.appRefInjector}))}writeValue(t){this.cdr.markForCheck(),this.value=t;let n=this._getOptionId(t),r=st(n,t);this.setProperty("value",r)}registerOnChange(t){this.onChange=n=>{this.value=this._getOptionValue(n),t(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(t){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n),t))return n;return null}_getOptionValue(t){let n=Bt(t);return this._optionMap.has(n)?this._optionMap.get(n):t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=B(i)))(r||i)}})();static \u0275dir=_({type:i,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(n,r){n&1&&C("change",function(a){return r.onChange(a.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[O([Gt]),v]})}return i})(),at=(()=>{class i{_element;_renderer;_select;id;constructor(t,n,r){this._element=t,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(t){this._select!=null&&(this._select._optionMap.set(this.id,t),this._setElementValue(st(this.id,t)),this._select._writeValueAfterRender())}set value(t){this._setElementValue(t),this._select&&this._select._writeValueAfterRender()}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select._writeValueAfterRender())}static \u0275fac=function(n){return new(n||i)(u(x),u(I),u(Q,9))};static \u0275dir=_({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return i})(),Wt={provide:X,useExisting:S(()=>lt),multi:!0};function ze(i,e){return i==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${i}: ${e}`.slice(0,50))}function Ut(i){return i.split(":")[0]}var lt=(()=>{class i extends ge{value;_optionMap=new Map;_idCounter=0;set compareWith(t){this._compareWith=t}_compareWith=Object.is;writeValue(t){this.value=t;let n;if(Array.isArray(t)){let r=t.map(o=>this._getOptionId(o));n=(o,a)=>{o._setSelected(r.indexOf(a.toString())>-1)}}else n=(r,o)=>{r._setSelected(!1)};this._optionMap.forEach(n)}registerOnChange(t){this.onChange=n=>{let r=[],o=n.selectedOptions;if(o!==void 0){let a=o;for(let m=0;m<a.length;m++){let V=a[m],J=this._getOptionValue(V.value);r.push(J)}}else{let a=n.options;for(let m=0;m<a.length;m++){let V=a[m];if(V.selected){let J=this._getOptionValue(V.value);r.push(J)}}}this.value=r,t(r)}}_registerOption(t){let n=(this._idCounter++).toString();return this._optionMap.set(n,t),n}_getOptionId(t){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n)._value,t))return n;return null}_getOptionValue(t){let n=Ut(t);return this._optionMap.has(n)?this._optionMap.get(n)._value:t}static \u0275fac=(()=>{let t;return function(r){return(t||(t=B(i)))(r||i)}})();static \u0275dir=_({type:i,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(n,r){n&1&&C("change",function(a){return r.onChange(a.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},standalone:!1,features:[O([Wt]),v]})}return i})(),ut=(()=>{class i{_element;_renderer;_select;id;_value;constructor(t,n,r){this._element=t,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(t){this._select!=null&&(this._value=t,this._setElementValue(ze(this.id,t)),this._select.writeValue(this._select.value))}set value(t){this._select?(this._value=t,this._setElementValue(ze(this.id,t)),this._select.writeValue(this._select.value)):this._setElementValue(t)}_setElementValue(t){this._renderer.setProperty(this._element.nativeElement,"value",t)}_setSelected(t){this._renderer.setProperty(this._element.nativeElement,"selected",t)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static \u0275fac=function(n){return new(n||i)(u(x),u(I),u(lt,9))};static \u0275dir=_({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"},standalone:!1})}return i})();var Ht=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=ie({type:i});static \u0275inj=te({})}return i})();var dt=(()=>{class i{static withConfig(t){return{ngModule:i,providers:[{provide:rt,useValue:t.callSetDisabledState??_e}]}}static \u0275fac=function(n){return new(n||i)};static \u0275mod=ie({type:i});static \u0275inj=te({imports:[Ht]})}return i})();function qt(i,e){i&1&&(h(0,"span",12),s(1,"\u25B2"),f())}function zt(i,e){i&1&&(h(0,"span",13),s(1,"\u25BC"),f())}function Kt(i,e){i&1&&(h(0,"span",14),s(1,"\u2014"),f())}function Xt(i,e){i&1&&(h(0,"span",12),s(1,"Increasing"),f())}function Zt(i,e){i&1&&(h(0,"span",13),s(1,"Decreasing"),f())}function Qt(i,e){i&1&&(h(0,"span",14),s(1,"Stable"),f())}function Yt(i,e){if(i&1&&(h(0,"div",1)(1,"div",2)(2,"div",3),s(3),f(),h(4,"div",4)(5,"h3",5),s(6),f()()(),h(7,"div",6)(8,"span",7),s(9),f(),h(10,"span",8),s(11),f()(),h(12,"div",9)(13,"div",10)(14,"span",11),ne(15,qt,2,0,"span",12)(16,zt,2,0,"span",13)(17,Kt,2,0,"span",14),f(),h(18,"span",15),s(19),f()()()(),h(20,"span",16),ne(21,Xt,2,0,"span",12)(22,Zt,2,0,"span",13)(23,Qt,2,0,"span",14),f()),i&2){let t=e.$implicit;l(3),se(t.icon),l(3),y(" ",t.name," "),l(3),y(" ",t.value," "),l(2),se(t.unit),l(4),re(t.trend.direction==="up"?15:t.trend.direction==="down"?16:17),l(3),Oe(t.trend.direction==="up"?"text-red-500":t.trend.direction==="down"?"text-green-500":"text-gray-500"),l(),y(" ",t.trend.direction==="neutral"?"No Change":t.trend.percentage+"%"," "),l(2),re(t.trend.direction==="up"?21:t.trend.direction==="down"?22:23)}}var Y=class i{keyMetrics;timeRange;filteredPollutionData;filteredWeatherData;keyMetricsChange=new E;calculateTrend(e,t){let n=e-t,r=Math.abs(n/t*100).toFixed(2),o="neutral",a="grey";return n>0?(o="up",a="red"):n<0&&(o="down",a="green"),{direction:o,percentage:r,color:a}}calculateKeyMetrics(){if(this.filteredPollutionData.length===0||this.filteredWeatherData.length===0){this.keyMetrics=[];return}let e=this.filteredPollutionData[this.filteredPollutionData.length-1],t=this.filteredWeatherData[this.filteredWeatherData.length-1],n=this.filteredPollutionData.length>1?this.filteredPollutionData[this.filteredPollutionData.length-2]:e,r=this.filteredWeatherData.length>1?this.filteredWeatherData[this.filteredWeatherData.length-2]:t,o=this.calculateTrend(e.TOTEXTTAU,n.TOTEXTTAU),a=this.calculateTrend(t.T2M,r.T2M),m=this.calculateTrend(t.PS,r.PS),V=this.calculateTrend(t.QV2M,r.QV2M);this.keyMetrics=[{name:"Total Aerosol Optical Depth",value:e.TOTEXTTAU.toFixed(4),unit:"",icon:"\u{1F32B}\uFE0F",trend:o,color:"blue"},{name:"Temperature",value:(t.T2M-273.15).toFixed(1),unit:"\xB0C",icon:"\u{1F321}\uFE0F",trend:a,color:"red"},{name:"Pressure",value:(t.PS/1e3).toFixed(1),unit:"kPa",icon:"\u{1F53D}",trend:m,color:"purple"},{name:"Humidity",value:(t.QV2M*100).toFixed(1),unit:"%",icon:"\u{1F4A7}",trend:V,color:"green"}]}ngOnChanges(){this.calculateKeyMetrics(),this.keyMetricsChange.emit(this.keyMetrics)}ngOnInit(){this.calculateKeyMetrics(),console.log(this.keyMetrics),this.keyMetricsChange.emit(this.keyMetrics)}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=W({type:i,selectors:[["app-key-metrices"]],inputs:{timeRange:"timeRange",filteredPollutionData:"filteredPollutionData",filteredWeatherData:"filteredWeatherData"},outputs:{keyMetricsChange:"keyMetricsChange"},features:[G],decls:3,vars:0,consts:[[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-4","gap-6","mb-8"],[1,"bg-gradient-to-br","from-gray-50","to","gray-100","p-6","rounded-xl","shadow-lg","hover:shadow-xl","transition-shadow","duration-300","border","border-gray-200"],[1,"flex","items-center","justify-between","mb-4"],[1,"text-3xl"],[1,"text-right"],[1,"text-sm","font-medium","text-gray-600"],[1,"mb-3"],[1,"text-3xl","font-bold","text-gray-800"],[1,"text-lg","text-gray-600","ml-1"],[1,"flex","items-center","justify-between"],[1,"flex","items-center"],[1,"text-lg","mr-2"],[1,"text-red-500"],[1,"text-green-500"],[1,"text-gray-500"],[1,"text-sm","font-medium"],[1,"text-xs","text-gray-500"]],template:function(t,n){t&1&&(h(0,"div",0),Se(1,Yt,24,9,null,null,Fe),f()),t&2&&(l(),xe(n.keyMetrics))},encapsulation:2})};var ct=class i{pollutionData=[];weatherData=[];pollutionDataService=A(L);pollutionChartData={datasets:[]};weatherChartData={datasets:[]};pollutionChartOptions={};weatherChartOptions={};selectedTimeRange="daily";filteredPollutionData=[];filteredWeatherData=[];keyMetrics=[];ngOnInit(){this.loadPollutionData(),this.loadWeatherData(),this.setUpChartOptions()}loadPollutionData(){this.pollutionDataService.getPollutionData().subscribe({next:e=>{this.pollutionData=e,this.filterDataByTimeRange(),this.updatePollutionChart()},error:e=>{console.error("Error loading pollution data:",e)}})}loadWeatherData(){this.pollutionDataService.getWeatherData().subscribe({next:e=>{this.weatherData=e,this.filterDataByTimeRange(),this.updateWeatherChart()},error:e=>{console.error("Error loading weather data:",e)}})}onTimeChange(){this.filterDataByTimeRange(),this.updatePollutionChart(),this.updateWeatherChart()}setUpChartOptions(){this.pollutionChartOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top"},title:{display:!0,text:"pollution data over time"}},scales:{x:{display:!0,title:{display:!0,text:"Time"}},y:{display:!0,title:{display:!0,text:"Aerosol Optical Depth"},beginAtZero:!1,grace:"50%"}}},this.weatherChartOptions={responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!0,position:"top"},title:{display:!0,text:"Weather Data Over Time"}},scales:{x:{display:!0,title:{display:!0,text:"Time"}},y:{type:"linear",display:!0,position:"left",title:{display:!0,text:"Temperature (\xB0C)"},beginAtZero:!1,grace:"5%"},y1:{type:"linear",position:"right",display:!0,title:{display:!0,text:"Pressure (kPa)"},grid:{drawOnChartArea:!1},beginAtZero:!1,grace:"5%"}}}}filterDataByTimeRange(){switch(this.selectedTimeRange){case"daily":this.filteredPollutionData=this.pollutionData.slice(-24),this.filteredWeatherData=this.weatherData.slice(-24);break;case"weekly":this.filteredPollutionData=this.pollutionData.filter((e,t)=>t%24===0).slice(-7),this.filteredWeatherData=this.weatherData.filter((e,t)=>t%24===0).slice(-7);break;case"monthly":this.filteredPollutionData=this.pollutionData.filter((e,t)=>t%24===0).slice(-30),this.filteredWeatherData=this.weatherData.filter((e,t)=>t%24===0).slice(-30);break;default:this.filteredPollutionData=this.pollutionData,this.filteredWeatherData=this.weatherData}}formatTimestamp(e){let t=new Date(e);switch(this.selectedTimeRange){case"daily":return t.toLocaleString("en-US",{hour:"2-digit",minute:"2-digit"});case"weekly":return t.toLocaleString("en-US",{month:"short",day:"numeric"});case"monthly":return t.toLocaleString("en-US",{month:"short",day:"numeric"});default:return t.toLocaleString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}}getTimeRangeDisplayName(){switch(this.selectedTimeRange){case"daily":return"Daily (by Hours)";case"weekly":return"Weekly (by Days)";case"monthly":return"Monthly (by Days)";default:return"All Data"}}updatePollutionChart(){let e=this.filteredPollutionData.map(o=>this.formatTimestamp(o.timestamp)),t=this.filteredPollutionData.map(o=>o.TOTEXTTAU),n=this.filteredPollutionData.map(o=>o.BCEXTTAU),r=this.filteredPollutionData.map(o=>o.DUEXTTAU);this.pollutionChartData={labels:e,datasets:[{label:"Total Aerosol Optical Depth",data:t,borderColor:"rgba(255, 99, 132, 1)",backgroundColor:"rgba(255, 99, 132, 0.2)",fill:!0,borderWidth:2,tension:.4},{label:"Black Carbon",data:n,borderColor:"rgba(54, 162, 235, 1)",backgroundColor:"rgba(54, 162, 235, 0.2)",fill:!1,borderWidth:2,tension:.4},{label:"Dust",data:r,borderColor:"rgba(255, 206, 86, 1)",backgroundColor:"rgba(255, 206, 86, 0.2)",fill:!1,borderWidth:2,tension:.4}]}}updateWeatherChart(){let e=this.filteredWeatherData.map(r=>this.formatTimestamp(r.timestamp)),t=this.filteredWeatherData.map(r=>r.T2M-273.15),n=this.filteredWeatherData.map(r=>r.PS/1e3);this.weatherChartData={labels:e,datasets:[{data:t,label:"Temperature (\xB0C)",borderColor:"#F59E0B",backgroundColor:"rgba(245, 158, 11, 0.1)",borderWidth:2,fill:!0,tension:.4,yAxisID:"y"},{data:n,label:"Pressure (kPa)",borderColor:"#8B5CF6",backgroundColor:"rgba(139, 92, 246, 0.1)",borderWidth:2,fill:!1,tension:.4,yAxisID:"y1"}]}}handleKeyMetricsChange(e){this.keyMetrics=e}static \u0275fac=function(t){return new(t||i)};static \u0275cmp=W({type:i,selectors:[["app-pollution"]],decls:43,vars:16,consts:[[1,"p-8","mx-auto","w-90"],[1,"text-2xl","font-bold","text-center","text-gray-600"],[1,"flex","flex-col","sm:flex-row","gap-4","mb-8"],[1,"text-sm","font-medium","text-gray-700"],[1,"border","rounded-md","p-2",3,"ngModelChange","change","ngModel"],["value","daily"],["value","weekly"],["value","monthly"],[1,"p-3","rounded-lg","mb-6"],[1,"text-sm","text-blue-800"],[3,"keyMetricsChange","filteredPollutionData","filteredWeatherData"],[1,"grid","grid-cols-1","lg:grid-cols-2","gap-8","mb-8"],[1,"bg-gray-50","bg-opacity-90","p-6","rounded-lg","shadow-sm"],[1,"text-xl","font-semibold","mb-4","text-gray-800"],[1,"h-80","flex","flex-col","align-center","justify-center"],[2,"display","block"],["baseChart","",3,"data","options","type"],[1,"bg-green-50","p-4","rounded-lg"],[1,"font-semibold","text-green-800"]],template:function(t,n){t&1&&(d(0,"div",0)(1,"h1",1),s(2,"Pollution Data And Weather Data"),c(),d(3,"div",2)(4,"label",3),s(5,"Time Range:"),c(),d(6,"select",4),Te("ngModelChange",function(o){return Pe(n.selectedTimeRange,o)||(n.selectedTimeRange=o),o}),C("change",function(){return n.onTimeChange()}),d(7,"option",5),s(8,"Daily (by Hours)"),c(),d(9,"option",6),s(10,"Weekly (by Days)"),c(),d(11,"option",7),s(12,"Monthly (by Days)"),c()()(),d(13,"div",8)(14,"p",9)(15,"strong"),s(16,"Current View:"),c(),s(17),c()(),d(18,"app-key-metrices",10),C("keyMetricsChange",function(o){return n.handleKeyMetricsChange(o)}),c(),d(19,"div",11)(20,"div",12)(21,"h2",13),s(22,"Pollution Chart"),c(),d(23,"div",14)(24,"div",15),oe(25,"canvas",16),c()()(),d(26,"div",12)(27,"h2",13),s(28,"Weather Chart"),c(),d(29,"div",14)(30,"div",15),oe(31,"canvas",16),c()()()(),d(32,"div",17)(33,"h3",18),s(34,"Data Summary"),c(),d(35,"p"),s(36),c(),d(37,"p"),s(38),c(),d(39,"p"),s(40),c(),d(41,"p"),s(42),c()()()),t&2&&(l(6),Ne("ngModel",n.selectedTimeRange),l(11),ae(" ",n.getTimeRangeDisplayName()," ",n.filteredPollutionData.length," records "),l(),U("filteredPollutionData",n.filteredPollutionData)("filteredWeatherData",n.filteredWeatherData),l(7),U("data",n.pollutionChartData)("options",n.pollutionChartOptions)("type","line"),l(6),U("data",n.weatherChartData)("options",n.weatherChartOptions)("type","line"),l(5),y("Pollution records: ",n.pollutionData.length),l(2),y("Weather records: ",n.weatherData.length),l(2),ae("showing: ",n.filteredPollutionData.length," pollution records and ",n.filteredWeatherData.length," weather records"),l(2),y("time range: ",n.selectedTimeRange))},dependencies:[Re,Ge,dt,at,ut,Q,nt,ye,Y],encapsulation:2})};export{ct as Pollution};
